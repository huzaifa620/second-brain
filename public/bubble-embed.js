document.addEventListener('DOMContentLoaded',function(){let embedOpen=false;let styleBaseDivChat=`position:fixed;width:396px;height:85vh; max-height: 780px; bottom:32px; right: 96px;z-index:999999; opacity:0; transition: all 300ms ease-in-out; pointer-events:none; border:none; border-radius: 8px;
  }; box-shadow: 0px 10px 16px rgba(0, 0, 0, 0.25); `;let chatIframeStyle='position:absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 8px;';let styleBaseTooltip=`position:fixed;width:396px;height:230px; bottom:90px; right: 30px;z-index:999990; border:none; pointer-events:auto;`;let styleDivTooltip=`position:fixed;width:310px;height:230px; bottom:90px; right: 30px;z-index:999990; cursor: pointer;`;let styleImgDefault='position:fixed;width:48px;height:48px; bottom:32px; right: 32px;z-index:99999;background:#000;border-radius:50%; transition: transform 300ms ease-in-out, box-shadow 1500ms ease-in-out; cursor:pointer; box-shadow:0px 0px 8px 3px rgba(0,0,0, 0.2); ';let stylecloseChatBubble='position:absolute;width:24px;height:24px; top:20px; right: 16px; display: flex; align-items:center; justify-content: center; z-index:9999999; cursor:pointer; opacity:0; pointer-events:none; ';const vw=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0);const cleanedURL=window.brainEmbed.replace('chat.helppi-ai.fi','chat.dante-ai.com');const embedUrl=new URL(cleanedURL);const openByDefault=embedUrl.searchParams.get('bubbleopen');const embedImage=embedUrl.searchParams.get('image');let cookiesAllowed=false;if(vw<480){styleBaseDivChat=`position:fixed;width:calc(100% - 24px); height:calc(100% - 24px); bottom:12px; left: 12px;z-index:999999; opacity:0; transition: opacity 300ms ease-in-out; pointer-events:none; border-radius: 8px; box-shadow: 0px 10px 16px rgba(0, 0, 0, 0.25);`;styleImgDefault=styleImgDefault+='bottom:20px; right:20px;';styleBaseTooltip=`position:fixed;width:100%;height:auto; bottom:90px; right: 30px;z-index:999990; border:none; pointer-events:none;`;styleDivTooltip=`position:fixed;width: calc(100% - 90px);height:auto; bottom:10px; right: 80px;height:200px; z-index:999990;`;}
const styleImgHover=styleImgDefault+'transform:scale(1.10);';const styleImgPulse=styleImgDefault+'box-shadow:0px 0px 16px 3px rgba(0,0,0, 0.8);';const styleOpen=styleBaseDivChat+'opacity:1; pointer-events:auto;';const toggleEmbed=(forceOpen)=>{if(forceOpen){embedOpen=true;}else{embedOpen=!embedOpen;}
if(cookiesAllowed){localStorage.setItem('embed-chatbot-open',embedOpen);}
elemIframeTooltip.style.cssText='opacity:0;';divIframe.style.cssText=styleDivTooltip+'pointer-events: none;';setTimeout(()=>{divIframe.style.cssText='display:none;';},500);if(embedOpen){divChat.style.cssText=styleOpen;closeChatBubble.style.cssText=stylecloseChatBubble+'opacity:1; pointer-events:auto;';if(vw<480){document.body.style['overflow']='hidden';}}else{divChat.style.cssText=styleBaseDivChat;closeChatBubble.style.cssText=stylecloseChatBubble+'display:none; opacity:0;';setTimeout(()=>{divChat.style.cssText='display:none; opacity:0;';},500);if(vw<480){document.body.style['overflow']='unset';}}};const imgHover=()=>{elemImg.style.cssText=styleImgHover;};const imgDefault=()=>{elemImg.style.cssText=styleImgDefault;};const divIframe=document.createElement('div');const divChat=document.createElement('div');const elemIframeTooltip=document.createElement('iframe');const elemIframeThirdParty=document.createElement('iframe');elemIframeTooltip.src=window.brainEmbed.replace('chat.helppi-ai.fi','chat.dante-ai.com').replace('/embed?','/embed/tooltips?');elemIframeTooltip.title='Dante AI Prompts';elemIframeTooltip.style.cssText=styleBaseTooltip;divIframe.style.cssText=styleDivTooltip;divIframe.appendChild(elemIframeTooltip);elemIframeThirdParty.src=`${embedUrl.origin}/thirdparty.html`;elemIframeThirdParty.style='display:none; opacity:0;';elemIframeTooltip.addEventListener('click',()=>{toggleEmbed();});const elemImg=document.createElement('img');elemImg.src=embedImage!=='null'?embedImage:`${"http://147.182.142.200:5050"}/brains/brain.png`;elemImg.alt='Dante Chatbot Icon';elemImg.style.cssText=styleImgDefault;elemImg.addEventListener('click',()=>{toggleEmbed();});elemImg.addEventListener('mouseover',imgHover);elemImg.addEventListener('mouseout',imgDefault);elemImg.classList.add('dante-embed-icon');const elemIframe=document.createElement('iframe');elemIframe.id='dante_chatbot_iframe';elemIframe.src=cleanedURL;elemIframe.title='Dante AI Chatbot';elemIframe.allow='clipboard-write; microphone';elemIframe.style.cssText=chatIframeStyle;divChat.style.cssText=styleBaseDivChat;divChat.appendChild(elemIframe);const xmlns='http://www.w3.org/2000/svg';const g=document.createElementNS(xmlns,'g');const iconDefaultColor=embedUrl.searchParams.get('mode')==='true'?'#fff':'black';g.setAttribute('fill',iconDefaultColor);
const dValue='M10.0006 8.82129L14.1256 4.69629L15.3039 5.87462L11.1789 9.99962L15.3039 14.1246L14.1256 15.303L10.0006 11.178L5.8756 15.303L4.69727 14.1246L8.82227 9.99962L4.69727 5.87462L5.8756 4.69629L10.0006 8.82129Z';const path=document.createElementNS(xmlns,'path');path.setAttribute('d',dValue);g.appendChild(path);const svg=document.createElementNS(xmlns,'svg');svg.setAttribute('width','20');svg.setAttribute('height','20');svg.setAttribute('version','1.1');svg.setAttribute('xmlns',xmlns);svg.appendChild(g);const closeChatBubble=document.createElement('div');closeChatBubble.appendChild(svg);closeChatBubble.style.cssText=stylecloseChatBubble;closeChatBubble.addEventListener('click',()=>{toggleEmbed();});const pulseIn=()=>{elemImg.style.cssText=styleImgPulse;setTimeout(()=>pulseOut(),1500);};const pulseOut=()=>{elemImg.style.cssText=styleImgDefault;setTimeout(()=>pulseIn(),1500);};divChat.appendChild(closeChatBubble);document.body.appendChild(elemImg);document.body.appendChild(divChat);if(openByDefault==='true'){setTimeout(()=>toggleEmbed(),1000);}
pulseIn();window.addEventListener('message',function(event){if(event.data.eventType==='promptClick'){const chatIframe=document.querySelector('#dante_chatbot_iframe');chatIframe.contentWindow.postMessage(event.data,'*');toggleEmbed();}
if(event.data.eventType==='tooltipClick'){toggleEmbed();}
if(event.data.eventType==='bubbleInteractionDate'){if(cookiesAllowed){localStorage.setItem('embed-chatbot-last-interaction',event.data.eventData);}}
if(event.data.eventType==='thirdparty'&&event.data.eventData==='allow_third_party_cookie'){if(localStorage.getItem('embed-chatbot-open')==='true'){const lastInteraction=new Date(localStorage.getItem('embed-chatbot-last-interaction'));const interactionTime=lastInteraction.getTime()+5*60000;const currentDate=new Date();const currentTime=currentDate.getTime();cookiesAllowed=true;if(interactionTime>currentTime){setTimeout(()=>toggleEmbed(true),1000);}}
const chatIframe=document.querySelector('#dante_chatbot_iframe');chatIframe.contentWindow.postMessage(event.data,'*');}});});